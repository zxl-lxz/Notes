# CDN

看了网站的一些文章，记录下自己的理解。后续有新收获再补充。

先说结论

## CDN 是什么

中文名：内容分发网络

`CDN` 是一个节点。该节点存储着用户所需要的资源。本来需要向远距离的 `源站` 获取的资源，现在被缓存到了 `CDN` 节点上。降低了请求距离和请求时间。减少了源站的压力。

## 输入 URL 后如何连接到 CDN

1. 用户发起 `a.b.com` 的请求。
2. `本地DNS` 需要通过 `递归解析` 的方式获取 `IP` 地址。如果 `本地DNS` 缓存上没有该域名对应的 `IP` 地址，则向 `根DNS` 发送查询请求。
3. `根DNS` 发现域名前缀为 `com` ，则给出负责解析 `com` 的 `顶级DNS` 的 IP 地址。
4. `本地DNS` 又向 `顶级DNS` 发送查询请求。
5. `顶级DNS` 发现前缀为 `b.com` ，给出负责的 `权威DNS` 的 IP。
6. 本地 `DNS` 又向 `权威DNS` 发送查询请求。
7. `权威DNS` 发现，该域名设置了 `CDN` 。于是将 `全局均衡负载系统` 的 IP 地址返回。
8. `本地DNS` 向 `全局均衡负载系统`发送查询请求，该系统判断用户的坐标，并结合当前的各节点的网络情况，将最优的一个节点的 IP 地址返回。
9. `本地DNS` 将最终的 `DNS` 查询结果，也就是最终的 IP 地址返回给 客户端。
10. 客户端根据 IP 发起请求。
